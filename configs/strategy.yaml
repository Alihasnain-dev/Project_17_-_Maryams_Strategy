# Strategy configuration (MVP / Phase A watchlist).
#
# Design goals:
# - No look-forward bias (causal features, "high so far" only).
# - Intraday-only positions (flat EOD).
# - Conservative execution (slippage).

timezone: America/New_York

watchlist:
  # method: open_gap | premarket_gap
  # - open_gap: Screens by (today's open / prev close) - gap at market open
  # - premarket_gap: Premarket screener using 04:00-09:29 ET minute data
  #   METHODOLOGY: Candidates prioritized by PREVIOUS DAY VOLUME (descending),
  #   then scanned for premarket return/volume/dollar_volume thresholds.
  #   This is NOT a full universe scan - it samples top N by prev volume.
  method: premarket_gap

  # Common parameters (both methods)
  top_n: 20
  min_prev_close: 0.50
  max_prev_close: 20.0

  # open_gap method parameters
  min_gap_pct: 0.05              # Minimum open-gap % (for open_gap method)

  # premarket_gap method parameters
  min_premarket_pct: 0.05        # Minimum premarket return (5%)
  min_premarket_volume: 50000    # Minimum shares traded in premarket
  min_premarket_dollar_volume: 100000  # Minimum $ volume in premarket (liquidity)
  max_candidates_to_scan: 200    # Max tickers to fetch premarket data for (API budget)
                                 # Candidates sorted by prev day volume (deterministic)

session:
  premarket_start: "04:00"
  premarket_end: "09:29"
  trade_start: "09:30"
  trade_end: "11:00"
  force_flat: "16:00"

execution:
  slippage:
    model: fixed_cents
    cents: 0.02
  fees_per_trade: 0.00

risk:
  max_trades_per_day: 5
  max_daily_loss_pct: 0.02
  cooldown_minutes_after_stop: 2
  account_equity: 10000.0

# Portfolio-level configuration
# This enables proper capital management and prevents impossible overlapping positions
portfolio:
  enabled: true                 # Use portfolio-level simulation (recommended)
  max_positions: 3              # Maximum concurrent open positions
  max_position_pct: 0.25        # Maximum position size as % of equity
  risk_per_trade_pct: 0.01      # Risk per trade as % of equity (for position sizing)

strategy_small_caps:
  allow_short: false
  allow_starter_entries: true
  starter_fraction: 0.25

  risk:
    stop_buffer_pct: 0.001

  macro_filter:
    require_above_ema_34: true
    require_above_ema_55: true
    require_above_sma_200: false

  entry:
    require_pmh_breakout: true
    max_extension_from_ema8_pct: 0.015
    require_momentum_bull: true

  exits:
    exit_on_close_below_ema8: true
    exit_on_ttm_momentum_bear: true
    scale_out_first_fraction: 0.50
